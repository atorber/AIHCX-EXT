# 🔥 Chrome扩展热加载开发方案

## 问题
每次修改代码都需要手动重新加载Chrome扩展，开发效率低。

## 解决方案
我已经为你创建了Chrome扩展热加载开发环境，可以自动监听文件变化并重新构建扩展。

## 🚀 使用方法

### 1. 基础热加载（推荐）
```bash
npm run dev:hot
```

**功能：**
- ✅ 自动监听 `src/` 目录文件变化
- ✅ 自动重新构建扩展
- ✅ 友好的控制台提示
- ✅ 提示手动重新加载扩展

### 2. 高级热加载
```bash
npm run dev:hot-advanced
```

**功能：**
- ✅ 包含基础热加载的所有功能
- ✅ 自动打开Chrome扩展管理页面
- ✅ 更详细的提示信息

## 📋 开发流程

### 第一次设置
1. **构建扩展**：
   ```bash
   npm run build
   ```

2. **在Chrome中加载扩展**：
   - 打开 `chrome://extensions/`
   - 开启"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择 `dist` 目录

3. **启动热加载**：
   ```bash
   npm run dev:hot
   ```

### 日常开发
1. **修改代码**：编辑 `src/` 目录下的文件
2. **等待构建**：控制台会显示构建进度
3. **重新加载**：构建完成后，在Chrome扩展管理页面点击"重新加载"按钮

## 💡 开发技巧

### 快速重新加载
- 修改代码后，等待控制台显示"✅ 扩展构建完成"
- 按 `Cmd+R` (Mac) 或 `Ctrl+R` (Windows) 刷新Chrome扩展管理页面
- 点击扩展的"重新加载"按钮

### 停止热加载
- 按 `Ctrl+C` 停止热加载服务

## 🔧 技术实现

### 文件监听
- 使用 `chokidar` 监听 `src/` 目录
- 支持文件变化、新增、删除事件

### 自动构建
- 使用 `npm run build` 重新构建扩展
- 构建队列机制，避免重复构建

### 用户提示
- 友好的控制台输出
- 自动打开Chrome扩展管理页面（高级模式）

## 📁 相关文件

```
scripts/
├── chrome-hot-reload.js             # 基础热加载脚本
├── chrome-hot-reload-advanced.js    # 高级热加载脚本
└── hot-reload.js                    # 通用热加载脚本

HOT-RELOAD-GUIDE.md                  # 详细使用指南
```

## 🎯 优势

1. **提高开发效率**：无需手动重新构建和加载
2. **实时反馈**：文件变化立即触发构建
3. **友好提示**：清晰的控制台输出和操作指引
4. **稳定可靠**：基于成熟的文件监听技术
5. **易于使用**：一条命令启动热加载

## 🛠️ 故障排除

### 热加载服务启动失败
```bash
# 检查依赖
npm install

# 重新启动
npm run dev:hot
```

### 文件变化未检测到
1. 确保文件保存在 `src/` 目录下
2. 检查文件是否被忽略
3. 重启热加载服务

### 扩展重新加载失败
1. 检查Chrome扩展管理页面是否开启开发者模式
2. 手动删除扩展后重新加载
3. 检查 `dist` 目录是否存在

## 🎉 开始使用

现在你可以享受高效的Chrome扩展开发体验了！

```bash
# 启动热加载
npm run dev:hot

# 修改代码，自动构建
# 在Chrome扩展管理页面点击"重新加载"
# 享受热加载带来的便利！
```
